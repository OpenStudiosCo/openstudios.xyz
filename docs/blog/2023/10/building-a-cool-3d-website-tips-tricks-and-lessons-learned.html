<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="We are Open Studios. Perth based digital production studio."><title>Building A Cool 3D website: Tips, Tricks and Lessons Learned</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png"><link rel="manifest" href="/assets/favicon/site.webmanifest" crossorigin="use-credentials"><link rel="mask-icon" href="/assets/favicon/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#000000"><link rel="stylesheet" href="/assets/css/keen-slider.min.css"><script async src="/assets/js/keen-slider.js"></script><link rel="stylesheet" href="/assets/css/parvus.min.css"><script src="/assets/js/parvus.min.js"></script><link rel="stylesheet" href="/assets/css/1999.css"><script src="https://www.google.com/recaptcha/api.js"></script><link rel="canonical" href="https://openstudios.xyz/blog/2023/10/building-a-cool-3d-website-tips-tricks-and-lessons-learned.html"><meta property="og:title"><meta property="og:description" content="Explore our digital studio retrospectives, project updates and technical guides. Gain insights into our process, expertise and abilities."><meta property="og:type" content="article"><meta property="og:image" content="https://openstudios.xyz/assets/images/pages/case_studies.jpg"><meta property="og:image:width" content="1024"><meta property="og:image:height" content="768"><meta name="twitter:title"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:description" content="Explore our digital studio retrospectives, project updates and technical guides. Gain insights into our process, expertise and abilities."><meta name="twitter:image" content="https://openstudios.xyz/assets/images/pages/case_studies.jpg"><script async src="https://www.googletagmanager.com/gtag/js?id=AW-983760722"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'AW-983760722');</script><style>#page-wrapper {
    position: relative;
    z-index: 2;
}
#webgl-wrapper {
    overflow: hidden;
    position: absolute;
    z-index: 1;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
}
#loader_symbols {
    display: block;
    position:absolute;
    top:0;
    left:0;
    z-index: 2;
}

body {
    background-color: #000;
    margin: 0;
    padding: 0;
}
#webgl {
    display: none;
    opacity: 0;
}
#pageOverlay,
#webgl {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    display: block;
}
#pageOverlay {
    border: 0 none;
    display: none;
    z-index: 10000;
}
#pokematrixSign,
#exitSign {
    background: black;
    font-weight: bold;
    color: #fff;
    box-shadow: 0px 0px 5px 5px #00DD00;
    text-shadow: 2.5px 2.5px 5px #999;
    cursor: pointer;
    border: solid 1px #00DD00;
    border-radius: 1rem;
    padding: 0.5rem;
    position: fixed;
    top: 0;
    right: 0;
    z-index: 10001;
    padding-top: 1.75rem;
    padding-right: 1.75rem;
    margin-right: -1rem;
    margin-top: -1rem;
}
#pokematrixSign img,
#exitSign img {
    max-width: min(80px, 15vw);
    height: auto;
}
#pokematrixSign:active,
#pokematrixSign:focus,
#pokematrixSign:hover,
#exitSign:active,
#exitSign:focus,
#exitSign:hover {
    box-shadow: 0px 0px 7.5px 7.5px #00FF00;
    border-color: #00FF00;
}

#pokematrixSign {
    opacity: 0;
    cursor: pointer;
    z-index: 10003;
}
#exitSign {
    display: none;
}
#pokematrixImage,
#pokematrixCanvas {
    border-radius: 1rem;
    height: auto;
    position: fixed;
    right: 0;
    top: 0;
    z-index: 10002;
}
#pokematrixImage {
    top: 13rem;
}

@media screen and (min-width: 640px) {
    #pokematrixSign,
    #exitSign {
        padding: 1rem;
        margin-top: 0rem;
        margin-right: 0rem;
        top: 2rem;
        right: 3rem;
    }
     #pokematrixImage,
    #pokematrixCanvas {
        right: calc(3rem - 5px);
        top: calc(2rem - 5px);
    }
}</style></head><body onload="_init( 3000 );"><noscript><style>h1#loadingSign { display: none }</style></noscript><div id="page-wrapper"><div class="header_bg"></div><div class="header" role="banner"><div class="h1"><a href="/" title="Home"><img src="/assets/images/logo-wide.png" alt="Logo"></a></div></div><div class="menu" role="navigation"><ul role="menu"><li role="presentation"><a href="/about_us.html" role="menuitem">About Us</a></li><li role="presentation"><a href="/services.html" role="menuitem">Services</a></li><li role="presentation"><a href="/case_studies.html" role="menuitem">Case Studies</a></li><li role="presentation"><a href="/portfolio.html" role="menuitem">Portfolio</a></li><li role="presentation"><a href="/contact_us.html" role="menuitem">Contact Us</a></li></ul></div><div id="pokematrix"><canvas id="pokematrixCanvas"></canvas><canvas id="pokematrixImage"></canvas><a id="pokematrixSign"><img src="/assets/exit.svg" title="Return to the office" width="300" height="85" alt="Exit sign"></a></div><img id="exit_image" alt="Exit sign" style="display:none;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHMAAABCCAYAAABkZenuAAAFX2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgZXhpZjpQaXhlbFhEaW1lbnNpb249IjExNSIKICAgZXhpZjpQaXhlbFlEaW1lbnNpb249IjY2IgogICBleGlmOkNvbG9yU3BhY2U9IjEiCiAgIHRpZmY6SW1hZ2VXaWR0aD0iMTE1IgogICB0aWZmOkltYWdlTGVuZ3RoPSI2NiIKICAgdGlmZjpSZXNvbHV0aW9uVW5pdD0iMiIKICAgdGlmZjpYUmVzb2x1dGlvbj0iNzIvMSIKICAgdGlmZjpZUmVzb2x1dGlvbj0iNzIvMSIKICAgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIKICAgcGhvdG9zaG9wOklDQ1Byb2Zp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"><img id="exit_image_mobile" alt="Exit sign" style="display:none;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHMAAABCCAYAAABkZenuAAAFZmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgZXhpZjpQaXhlbFhEaW1lbnNpb249IjExNSIKICAgZXhpZjpQaXhlbFlEaW1lbnNpb249IjY2IgogICBleGlmOkNvbG9yU3BhY2U9IjEiCiAgIHRpZmY6SW1hZ2VXaWR0aD0iMTE1IgogICB0aWZmOkltYWdlTGVuZ3RoPSI2NiIKICAgdGlmZjpSZXNvbHV0aW9uVW5pdD0iMiIKICAgdGlmZjpYUmVzb2x1dGlvbj0iNzIvMSIKICAgdGlmZjpZUmVzb2x1dGlvbj0iNzIvMSIKICAgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIKICAgcGhvdG9zaG9wOklDQ1Byb2Zp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"><div class="content_row" role="main"><script>window.addEventListener("DOMContentLoaded", function() {
  let images = document.querySelectorAll( '.blog_post img' );

  images.forEach( imageElm => {
    // Create a new anchor element
    const linkElm = document.createElement('a');
    // Set the href attribute to the image's src
    linkElm.href = imageElm.src;
    linkElm.classList.add('lightbox');
    
    // Insert the image as a child of the anchor element
    linkElm.appendChild(imageElm.cloneNode(true));
    
    // Replace the original image with the new anchor element
    imageElm.parentNode.replaceChild(linkElm, imageElm);
  } );
  const prvs = new Parvus();

});
</script><div class="content blog_post"><div class="breadcrumb"><a class="item" href="/blog.html">Blogs</a><span class="item">&nbsp;&nbsp;>&nbsp;&nbsp;</span><span class="item">Building A Cool 3D website: Tips, Tricks and Lessons Learned</span></div><h2>Building A Cool 3D website: Tips, Tricks and Lessons Learned</h2><p id="5eb2">I first learned to make websites back in 1999 using Macromedia software like Dreamweaver, Fireworks and Flash. It was a golden age for vibrant interactive experiences that pushed the boundaries of what to expect and that type of web development is what influences me. As a kid of eleven, it was life changing to be able to make my own graphics, animations and interactive experience all with definitely not warez (hai fbi — did I mention I was a minor at the time). The film The Matrix also just came out and I was learning how to use Linux. What I’m saying is that I’ve always been a nerd.</p>


<div class="wp-block-image">
<figure class="aligncenter"><img decoding="async" src="/assets/blog/2023/10/0*Wz8nmIypjtQCnF61.jpg" alt=""></figure></div>


<p id="c7ff">Learning is a journey that never ends, certainly that’s even more true in the world of games programming where even the most sensible wisdoms might get thrown out the window to achieve a result. Some might find that never ending challenge off-putting, but I love it and think it’s fantastic. For Open Studios new website, we wanted to create a digital experience that represented our creative and technical capabilities as a team. Knowing that pushing up against limitations can sometimes shape and produce the best innovative outcomes in the delivery of any project, we decided to proceed without considering the limits and just design whatever we wanted.</p>



<p id="e37a">Discussing what our new website would look like, we talked about building a virtual world and settled upon a 3D office. Inspired by experiences with video games like Cyberpunk 2077 and Grand Theft Auto, the idea was that you’ve entered an office and when you go to use a computer in that game world it pans and zooms the viewport to that computer for interaction.</p>



<p id="6e00">Garrett put together a 3D design reference for me to follow so that I could focus my efforts on the programming side of things. In the end the limitations of what I could do with three.js and as a browser experience pushed me to elevate the final result to new heights — far beyond our original plans. This article is a retrospective of that build.</p>



<p>https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2Ff8z5XBTd82M%3Ffeature%3Doembed&amp;display_name=YouTube&amp;url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3Df8z5XBTd82M&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2Ff8z5XBTd82M%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtubeThis design reference was made in Blender and rendered using Cycles by&nbsp;<a href="https://www.linkedin.com/in/garrett-ray-kinder-361ba6a5/" rel="noreferrer noopener" target="_blank">Garrett Kinder</a>.</p>



<h1 class="wp-block-heading" id="9c79">Architecture and tech stack</h1>



<p id="5345">In the past I’ve followed a couple of personal taste choices in my work, most of these came about due to my own journey in the industry. For example I liked the Jade templating language because it was similar to what I liked about Haml back in the Ruby on Rails days. I’ve called this combination of items the “Kettlefish” stack.</p>



<p id="ea5f">Kettlefish is the combination of the following technologies:</p>



<ul class="wp-block-list">
<li>A command line file generating build script</li>



<li>Rollup as the JS builder</li>



<li>Pug JS templates (Jade when the project started)</li>



<li>Stylus as the CSS preprocessing language</li>
</ul>



<p id="3a3c">The name is a portmanteau of the phrase “A different kettle of fish” because static HTML generation was very novel at the time. It isn’t anymore and so in the 4 years since I’ve dropped my own builder script (and&nbsp;<a href="https://www.npmjs.com/package/kettlefish" rel="noreferrer noopener" target="_blank">NPM package</a>) in favour of the massive Eleventy ecosystem. So massive I was able to just re-create my Kettlefish stack again inside it.</p>



<p id="60c5"><strong>HTML templating</strong></p>



<p id="0a49">Using Pug JS templates I split each page into variants — one that would live on the HTML fallback version of the site and another that would only live inside the virtual computer screen omitting things like header and footer menus. I originally tried to just hide the items in question using JavaScript but as they were loading inside iFrames that was problematic.</p>



<p id="8b6f">The About us page has a search engine facing HTML only page that is intended to load if the users device doesn’t support Javascript and an iFrame version for loading on the computer screen in the virtual world.</p>



<p id="5e0f">Here’s a quick rundown of the source files involved:</p>



<figure class="wp-block-image"><img decoding="async" src="/assets/blog/2023/10/1*4vfBxszhQ4gBRyialRsRMQ.png" alt=""></figure>



<figure class="wp-block-image"><img decoding="async" src="/assets/blog/2023/10/1*zfUNaAz6X209MbPsmrJRyw.png" alt=""><figcaption class="wp-element-caption">The&nbsp;<a href="https://github.com/OpenStudiosCo/openstudios.xyz/tree/master/src/web" rel="noreferrer noopener" target="_blank"><strong>/src/web/</strong></a><strong>&nbsp;</strong>folder contains Pug files that define the HTML pages that are going to be created, as you can see from the two About us source files Eleventy front matter data controls file output location, SEO fields.&nbsp;<strong>extends</strong>&nbsp;sets the template and&nbsp;<strong>include</strong>&nbsp;the common content source in /src/content/about_us.pug.</figcaption></figure>



<figure class="wp-block-image"><img decoding="async" src="/assets/blog/2023/10/1*CZVvUfCA9SGLJqS9eDd9mA.png" alt=""></figure>


<div class="wp-block-image">
<figure class="aligncenter"><img decoding="async" src="/assets/blog/2023/10/1*InKm7M9eS1_QHqc-yq6NAA.png" alt=""><figcaption class="wp-element-caption"><em>The&nbsp;<a href="https://github.com/OpenStudiosCo/openstudios.xyz/tree/master/src/templates" target="_blank" rel="noreferrer noopener">/src/templates</a>&nbsp;folder contains Pug files that contain common HTML structures such as the main HTML tag, head and body elements, etc. Pictured above are the two templates that power the iFrame and HTML fallback pages.</em></figcaption></figure></div>


<p id="4c72"><strong>Javascript builder</strong></p>



<p id="5a19">I followed the (at the time) latest tutorial for developing with Three.js but that didn’t work with my Rollup configuration. The current recommended builder is&nbsp;<a href="https://vitejs.dev/" rel="noreferrer noopener" target="_blank">Vite</a>&nbsp;but I had issues getting that to work with my WIP code, unfortunately I hadn’t decided to add a builder until I got to prelaunch!</p>



<p id="0f90">Along to the rescue came&nbsp;<a href="https://esbuild.github.io/" rel="noreferrer noopener" target="_blank">esBuild</a>, somehow having just the right defaults that it required nothing but a default configuration for my setup. This was probably the first positive experience I’ve ever had adopting a new unknown JS builder… I hope other web developers reading this get a sense of just what that means to me cause I’ve definitely had a *bad* time before!</p>



<figure class="wp-block-image"><img decoding="async" src="/assets/blog/2023/10/1*GIoav_V3xAMVNykWsHDtkg.png" alt=""></figure>



<figure class="wp-block-image"><img decoding="async" src="/assets/blog/2023/10/1*IwioFnqmem73ns74PPcIAA.png" alt=""><figcaption class="wp-element-caption">This is a side by side comparison of my build and watch configuration files for esBuild. In my experience a typical Rollup config is generally twice this size with maybe a couple of addon modules needed. Webpack will have a config magnitudes longer than Rollup. Esbuild just seems to ‘<em>get it’ out of the box.</em></figcaption></figure>



<p id="b092"><strong>Loading screen</strong></p>



<p id="c169">As I began to test for performance, it was immediately clear I had to implement some kind of loading screen. People with slow connections would be sitting there with nothing happening if assets were being loaded in and even on my relatively powerful computer I had a slight chug when constantly refreshing the scene from cache.</p>



<p id="f44d">Turning back to my childhood love of The Matrix, I decided to implement a loading screen inspired by that. It was trivial to sneak in a bit of code into the HTML source that would create that effect before the main virtual office code and it’s dependencies would be loaded asynchronously while the user is distracted by the pretty effect.This video demonstrates a longer loading time by throttling the network speed to a slow 3G connection using Chrome Web Developer Tools</p>



<h1 class="wp-block-heading" id="6abb">Asset preparation</h1>



<p id="39bc">In real time 3D it’s best to use simple geometry where possible and so some of the objects in the office scene are nothing more than rectangles with well designed materials. In fact the room itself is just a box with the door programmatically cut out using&nbsp;<a href="https://github.com/gkjohnson/three-bvh-csg" rel="noreferrer noopener" target="_blank">three-bvh-csg</a>.</p>



<p id="a336">The original models used in the room concept contained too much geometry and so I had to prepare them for the web in Blender first. Using the decimate modifier it was a bit of a trial and error process figuring out just how much detail I could lose while maintaining acceptable visuals.</p>



<figure class="wp-block-image"><img decoding="async" src="/assets/blog/2023/10/1*tdv72UPkSy_iTHwV17987g.png" alt=""><figcaption class="wp-element-caption">This small monstera plant came free from BlenderKit, but still required a bit of work to prepare it for use in a real-time 3D setting like our Three.js website.</figcaption></figure>



<p id="f2d4">The&nbsp;<a href="https://en.wikipedia.org/wiki/GlTF" rel="noreferrer noopener" target="_blank">glTF</a>&nbsp;file format is recommended by Three.js and when I tried to use anything else I quickly learned why. When using the game industry standard&nbsp;<a href="https://en.wikipedia.org/wiki/FBX" rel="noreferrer noopener" target="_blank">FBX</a>&nbsp;the rendered sizes of different assets was off and somehow their geometry got corrupted. The file sizes were also larger than their glTF counterparts. As the scene cannot begin playing until all the assets are loaded, it was important that their files were as small as possible.</p>



<p id="cc34">Preparing 3D models for the web reminded me a lot of compressing images for the web back in the dialup internet days. Thankfully we have things like AJAX now so rather than rolling up my visual assets into one giant binary file, they are individually loaded in asynchronously while the loading screen with the Matrix effect plays for the user.</p>



<p id="b668">You may notice that the original concept and produced website look a bit different, part of how that came about is the options for materials and shaders that each 3D renderer and environment brings to the table. Within Blender the results between just the two renderers Eevee and Cycles vary greatly, and so it also goes when you export your assets from there for use in real time 3D applications like Three.JS or Unreal Engine. Even in the world of film where you have a bit more control, there can often be a big change between the original design and the final result.</p>



<figure class="wp-block-image"><img decoding="async" src="/assets/blog/2023/10/1*b4dp_HOTSHoWwEXJarVLrw.png" alt=""></figure>



<figure class="wp-block-image"><img decoding="async" src="/assets/blog/2023/10/1*CqlrqrWsjwGYFjJVF-JNsw.png" alt=""><figcaption class="wp-element-caption">On the left is the original concept render in Blender Cycles and on the right the Three.JS production result.</figcaption></figure>



<h1 class="wp-block-heading" id="8869"><strong>Performance optimisation</strong></h1>



<p id="3797">Perhaps one of the biggest risks and unknowns in a venture like this is how to handle the different devices and their hardware capability. Using the FPS (Frames per second) I was able to monitor the users game session for a few seconds and then scale the visual experience according to what their device was able to render smoothly enough. This worked OK in theory, until tested on actual older devices which just crashed before they could even render a single frame with effects like bloom switched on. Even trying to slowly switch them on one by one didn’t work because those larger effects just cannot work on some settings and crash. Problem!</p>



<p id="f453">Enter&nbsp;<a href="https://www.npmjs.com/package/detect-gpu" rel="noreferrer noopener" target="_blank">detect-gpu</a>, a great little library containing a lookup table of many common device types and a simple scoring system. Using the score that detect-gpu provides, I was able to implement the logic that decides to switch on the very advanced effects if the device is deemed advanced enough — far preferable to slowing down/crashing peoples devices!</p>



<p id="4f5d">In the end I ended up with two modes, one that doesn’t use the&nbsp;<a href="https://threejs.org/docs/#examples/en/postprocessing/EffectComposer" rel="noreferrer noopener" target="_blank">effects compositing</a>&nbsp;or anti aliasing and a high end GPU mode that has it all. It became more work than expected because of the way light was calculated in the room — without the bloom effects all the colour and brightness values shift so the non special effects version of the scene has a totally different set of settings in order to maintain visual acuity with the full version.</p>



<p id="0d2b">The website has a&nbsp;<a href="https://openstudios.xyz/?fast=" rel="noreferrer noopener" target="_blank">manual switch</a>&nbsp;for forcing effects to be off, you can activate it by adding a query string key of “fast”.</p>



<figure class="wp-block-image"><img decoding="async" src="/assets/blog/2023/10/1*TKulZK8azmjiQ93OrMFuEA.png" alt=""></figure>



<figure class="wp-block-image"><img decoding="async" src="/assets/blog/2023/10/1*3f4NkhjMUmTz9UW0ulJZHw.png" alt=""><figcaption class="wp-element-caption">On the left is the low end device variant of the scene without effects like bloom and filmic colour. On the right is the full version.</figcaption></figure>



<h1 class="wp-block-heading" id="7219">Responsiveness and viewports</h1>



<p id="3f06">Websites will reflow their content in order to present the best experience for users on different screen sizes. The portrait version of the virtual office was originally completely unusable and so a bit of work went into trying to re-compose the scene around the different possible viewports.</p>



<p id="d98e">To make life easier with positioning, helpers were added to the scene. The website still has a&nbsp;<a href="https://openstudios.xyz/?debug=" rel="noreferrer noopener" target="_blank">debug mode</a>&nbsp;if you want to have a look.</p>



<figure class="wp-block-image"><img decoding="async" src="/assets/blog/2023/10/1*o6xfwPdjAcGUyBE5s69iOQ.png" alt=""></figure>



<p id="ab79">The result of the responsiveness work is a window resize event listener that changes room depth, moves furniture and changes the camera field of view, position and rotation so that the maximum amount of stuff is visible in a portrait frame — without completely changing the scene.</p>



<figure class="wp-block-image"><img decoding="async" src="/assets/blog/2023/10/1*2vuekKJBfu1ViNdEd_UuQA.png" alt=""></figure>



<figure class="wp-block-image"><img decoding="async" src="/assets/blog/2023/10/1*ylORDHjNqRmllbJBxSPHaA.png" alt=""><figcaption class="wp-element-caption">As you might notice when looking carefully at these screenshots, the furniture in the room and the field of view are shifted slightly in order to recompose the scene for portrait and landscape modes. We are also running without effects like bloom or anti aliasing here as my laptop couldn’t handle doing them.</figcaption></figure>



<h1 class="wp-block-heading" id="ad06">Device testing</h1>



<p id="2023">While I could load the website on my devices using my wi-fi, it was still important for debugging to have access to a console where I could see errors, run arbitrary commands and observe what happens when I run them without going back and forth between my phone and computer.</p>



<p id="76c7">Chrome has an excellent built-in&nbsp;<a href="https://developer.chrome.com/docs/devtools/remote-debugging/" rel="noreferrer noopener" target="_blank">remote debugger</a>&nbsp;for Android devices and I made extensive use of that when optimising the performance and viewport responsiveness of the site. Unfortunately I don’t have access to any iOS devices in my home so I had to rely on some online resources to render what that looked like and got feedback from a few people who had a variety of devices.</p>



<figure class="wp-block-image"><img decoding="async" src="/assets/blog/2023/10/1*vksiIbKlWcqwUwnypyiGaA.png" alt=""><figcaption class="wp-element-caption">The Chrome Remote Debugger showing a live feed of my phone’s browser tab on the left and the corresponding console with Langenium engine output on the right.</figcaption></figure>



<p id="010b">One user with an iPhone 11 wasn’t able to load the website at all due to iOS13 not being able to do ECMAScript 2015. The asset loaders within my code and some of the vendor code relied on Promises so I made the call that anyone with iOS less 14 just has to see the “1999 experience”, which is what we call the HTML fallback in house.</p>



<h1 class="wp-block-heading" id="fe6d">Scope creep</h1>



<p id="c2f2">Like any web development project, this one had some scope creep. Two notable ones that added about a month and a half to the project.</p>



<p id="00f7"><strong>Delay one — Entering the virtual office</strong></p>



<p id="37b9">When the 3D scene loads on the homepage, that made sense to me because it’s the main door to the office. But say you enter via the “Case studies” page from Google, it’s easy enough for me to detect the page loaded and throw up the correct virtual screen but the delay to get back to reading content felt like an unreasonable disruption to the user journey they were on.</p>



<p id="2d6e">To address the issue of delays when requesting specific pages, I added an twinkly exit sign that would load in using a miniature Matrix effect in the top right corner. You can see this effect in action if you visit a page like&nbsp;<a href="https://openstudios.xyz/about_us.html" rel="noreferrer noopener" target="_blank">About Us</a>. This small effect took a couple of weeks to get right but the pay off was definitely worth it, creating a more cohesive user experience that demonstrates our absolute finesse and control with their journey.</p>



<p>https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FLqbtxLtF3Ag&amp;display_name=YouTube&amp;url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DLqbtxLtF3Ag&amp;image=http%3A%2F%2Fi.ytimg.com%2Fvi%2FLqbtxLtF3Ag%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=google</p>



<p id="2359"><strong>Delay two — Visual acuity of the 1999 experience</strong></p>



<p id="77f6">The 1999 experience, or HTML fallback, went through a couple of design iterations. Originally looking more like the menu from an 1950s American diner, we opted for something a bit more modern.</p>



<figure class="wp-block-image"><img decoding="async" src="/assets/blog/2023/10/1*uiBCVQqP5MaF2fcNAuplVA.png" alt=""></figure>



<figure class="wp-block-image"><img decoding="async" src="/assets/blog/2023/10/1*xlgU3hxWpnSm2sMgP2yS3A.png" alt=""><figcaption class="wp-element-caption">V1 of the static website on the left compared to V4 on the right, as you can see a few changes happened between them!</figcaption></figure>



<p id="b6cc">It can be tricky making the call when to pause a project so that a blocker can be resolved. With our new branding, we started out with the logo and render of the office but didn’t have much in the way of additional graphics we could use on things like social media banners. I made the call the pause the project and worked on a 3D animation we dubbed “Riverside Outrun”.</p>



<figure class="wp-block-image"><img decoding="async" src="/assets/blog/2023/10/1*T_TFOjv7dKjIrFJzwcvzOQ.png" alt=""></figure>



<figure class="wp-block-image"><img decoding="async" src="/assets/blog/2023/10/1*JJ4FR11pMRw61NzJry9C1Q.png" alt=""></figure>



<p id="d7ac">Producing Riverside Outrun was a lot of fun. I used an old photo of the Perth skyline from before the mining buildings went up and gave it a bit of photomanipulation magic to turn it into a much longer skyline with the right colour profile for our vaporwave aesthetic. This image of the city was used as the skybox for the 3D animation.</p>



<figure class="wp-block-image"><img decoding="async" src="/assets/blog/2023/10/1*VUA-893VO9SfBord970Xyw.jpeg" alt=""></figure>



<figure class="wp-block-image"><img decoding="async" src="/assets/blog/2023/10/1*EhxJZNdhcnYW4A-f9ul0Kg.jpeg" alt=""><figcaption class="wp-element-caption">Like the themes of The Matrix, the year 1999 and the Vaporwave Aesthetic itself, using this older photo of the Perth skyline on the left carries on our theme of celebrating the past but with a futuristic twist.</figcaption></figure>



<p id="905c">The vaporwave aesthetic of the video meshes well with the brand and the virtual office. This additional sprint of creative and visual production ended up giving rise to our new motto “To Another World” so I’m very happy with how it all turned out and am glad I took the time to do that.</p>



<p>https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FgYr3hbP24sQ%3Ffeature%3Doembed&amp;display_name=YouTube&amp;url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DgYr3hbP24sQ&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FgYr3hbP24sQ%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube“To Another World” is kind of like a re-launch trailer for our business, I’m currently working on an extended version that intersplices footage of some of our other work as the car is driving in the night.</p>



<h1 class="wp-block-heading" id="9e4f">The future</h1>



<p id="995f">This new website is a platform for us to share the vision of our digital studio with the world. A few things from the original plan didn’t make it to launch — notably a wall of pet photos and a 3D talking cat. We will be adding those features over the months to come.</p>



<p id="cfc9">As time rolls on, we plan to add more rooms to the experience. The concept is that you are exploring a 3D building that represents our real world studio space but in the digital realm.</p>



<p id="9ea7">The first version is just our office with our computer workstations but we plan to add other rooms from our studio. The jewellery workshop and its show room are probably going to be the next steps. We also have a crafts room for sewing and studio photography.</p>



<p id="5b0d">Finally, if you still haven’t seen it, check out the&nbsp;<a href="https://openstudios.xyz/" rel="noreferrer noopener" target="_blank">Open Studios website</a>&nbsp;now!</p>
<br><br><a href="/blog.html">Back to Blog Home</a></div></div><div class="content_row newsletter" role="complementary"><div class="newsletter_bg"></div><div class="content"><div class="row center"><div class="wide-column"><script>function newsletterSubmit(token) {
    var validationElm = document.getElementById("newslettervalidation");
    var data = document.getElementById("newsletterform");
    fetch(data.getAttribute('action'), {
        method: data.getAttribute('method'),
        body: new FormData(data)
    }).then(function (response) {
        if (response.status === 200) {
        return response.text();
        } else {
        validationElm.innerHTML = response.text();
        }
    })
    .then(function (data) {
        validationElm.innerHTML = data;
        if (validationElm.innerHTML.indexOf('Email sent successfully.') >= 0) {
            document.getElementById("newsletterform").reset();
        }
    });
}</script><form id="newsletterform" method="post" action="https://mailform.openstudios.xyz/" role="form"><h3>Subscribe to our newsletter</h3><p>Get all our latest insights, tips and project updates, conveniently in your inbox.</p><table style="width: 100%"><tr><td style="width: 80%"><input type="hidden" name="name" value="n/a"><input type="hidden" name="message" value="Newsletter signup request"><input type="email" name="email" placeholder="Email address"></td><td style="padding-left: 1rem"><button class="g-recaptcha" data-sitekey="6LeiXp4nAAAAAKRxcYacR0ZhbcNjf7OMCkjolpNL" data-callback="newsletterSubmit" data-action="submit">Subscribe</button></td></tr></table><h3 id="newslettervalidation" style="color: red; font-weight: bold;"></h3></form></div></div></div></div><div class="content_row footer"><div class="content"><div class="row"><div class="narrow-column"><h3>About us</h3><ul role="menu"><li role="presentation"><a href="/about_us.html" role="menuitem">Meet the team</a></li><li role="presentation"><a href="/about_us.html" role="menuitem">Our values</a></li><li role="presentation"><a href="/blog.html" role="menuitem">Blog</a></li></ul></div><div class="narrow-column"><h3>Services</h3><ul role="menu"><li role="presentation"><a href="/services.html" role="menuitem">3D Modelling and Printing</a></li><li role="presentation"><a href="/services.html" role="menuitem">Animation</a></li><li role="presentation"><a href="/services.html" role="menuitem">Game Development</a></li><li role="presentation"><a href="/services.html" role="menuitem">Graphic Design</a></li><li role="presentation"><a href="/services.html" role="menuitem">Interactive Design</a></li><li role="presentation"><a href="/services.html" role="menuitem">Marketing Design</a></li><li role="presentation"><a href="/services.html" role="menuitem">Product design</a></li><li role="presentation"><a href="/services.html" role="menuitem">Web design</a></li><li role="presentation"><a href="/services.html" role="menuitem">Web development</a></li><li role="presentation"><a href="/services.html" role="menuitem">Video production</a></li></ul></div><div class="narrow-column"><h3>Our work</h3><ul role="menu"><li role="presentation"><a href="/case_studies.html" role="menuitem">Case studies</a></li><li role="presentation"><a href="/portfolio.html" role="menuitem">Portfolio</a></li><li role="presentation"><a href="/contact_us.html" role="menuitem">Contact Us</a></li></ul></div><div class="narrow-column"><h3>Terms</h3><ul role="menu"><li role="presentation"><a href="/accessibility.html" role="menuitem">Accessibility</a></li><li role="presentation"><a href="/ai-copyright.html" role="menuitem">AI and Copyright Policy</a></li><li role="presentation">               <a href="/privacy.html" role="menuitem">Privacy Policy</a></li></ul></div></div><div class="row center"><div class="h1"><a href="./" title="Home"><img src="/assets/images/logo-wide.png" alt="Logo"></a></div></div></div></div></div><div id="webgl-wrapper"><a id="exitSign" href="#"><img src="/assets/exit.svg" title="Return to the office" width="300" height="85"></a><iframe id="pageOverlay"></iframe><div id="webgl"></div><script id="vertexshader" type="x-shader/x-vertex">varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}</script><script id="fragmentshader" type="x-shader/x-fragment">// Kudos to https://github.com/mrdoob/three.js/issues/14104#issuecomment-1536582334
uniform sampler2D baseTexture;
uniform sampler2D bloomTexture;
varying vec2 vUv;
void main() {
    vec4 base_color = texture2D(baseTexture, vUv);
    vec4 bloom_color = texture2D(bloomTexture, vUv);
    float lum = 0.21 * bloom_color.r + 0.71 * bloom_color.g + 0.07 * bloom_color.b;
    gl_FragColor = vec4(base_color.rgb + bloom_color.rgb, max(base_color.a, lum));
}
</script><script>/**
 * Multi purpose scenograph for displaying "Scenes".
 * 
 * Components
 * - Asset Loader
 * - Event handler
 * 
 * Todo:
 * - Animation Loop
 * - UI Templates
 */

// Boot up the Scenograph and populate the window accessor
function _init( wait ) {

	let iosVer = iOSversion();

	// Don't run if we are dealing with iOS < v14 as it won't work.
	if (iosVer.status && parseInt(iosVer.version) < parseInt(14)) {
		return;
	}

	window.matrix_scene.start();
	
	// Create the main engine accessor
    if ( window.s ) { alert("window.s already set! Something is wrong."); return; }
	window.s = {};

    s.version = '0.6.0';
	s.url = '//' + location.host;
	s.env = _check_environment();

	console.log( '[ Langenium Engine ]' );
	console.log( '\t Version: ' + s.version );
	console.log( '\t Environment: ' + s.env );
	
	// Default modules
	var modules = [
		{
			name: "tweakpane",
			files: [ { path: '/vendor/tweakpane-3.1.10.min.js' } ]
		},
		{
			name: "TWEEN.js",
			files: [ { path: '/vendor/tween-21.0.0.umd.min.js' } ]
		},
		{ 
			name: "Virtual Office",
			requires: [ 'tweakpane', 'TWEEN.js' ],
			files: [ { path: "/main.js", callback: "window.virtual_office.init" } ]
		}
	];

	setTimeout( () => {
		_load_modules( modules, "s" );
	} , wait);
	
}

// @Source: https://hoohoo.top/blog/7389546/
function iOSversion() {
	let d, v;
	if (/iP(hone|od|ad)/.test(navigator.platform)) {
		v = (navigator.appVersion).match(/OS (\d+)_(\d+)_?(\d+)?/);
		d = {
		status: true,
		version: parseInt(v[1], 10) , 
		info: parseInt(v[1], 10)+'.'+parseInt(v[2], 10)+'.'+parseInt(v[3] || 0, 10)
		};
	}else{
		d = {status:false, version: false, info:''}
	}
	return d;
}

// Checks URL and determines environment.
function _check_environment () {
	var env;
	switch(location.hostname.split('.')[0]) {
		case 'lcl':
			env = 'Dev';
			break;
		default:
			env = 'Live';
			break;
	}
	return env;
	
}

// Execute an arbitrary function attached to the window global s.
function _execute(functionName, arguments, context ) {
	// Usage: executeFunctionByName("s.scenograph.director"., window, arguments);
	var namespaces = functionName.split(".");
	var func = namespaces.pop();
	for(var i = 0; i < namespaces.length; i++) {
		context = context[namespaces[i]];
	}
	return context[func].apply(this, arguments);
}

// Loads a list of modulesm
function _load_modules (modules, modules_class) {
	console.log('[ ' + modules.length + ' modules to load ]');
	var modules_loaded = 0;	

	// Array of modules waiting to be loaded
	var require_queue = [];

	// Array of required modules that will be removed. 
	// Every time a module is loaded, it goes through this 
	// modulename: loaded (true/false)
	var required_modules = {};

	var modules_callbacks = [];  // Note callback queue is sequential
	
	var requirement_check = function(module, module_idx) {
		// Set the switch so modules waiting on this module can load
		if ( required_modules[module.name] == false) {
			required_modules[module.name] = true;
		}

		// Check the required_modules array to see if there are any modules waiting for a module to be loaded	
		require_queue.forEach(function(queued_module, queued_module_idx){
			// Checking each dependency and comparing it to the required_modules array to see if it's been loaded
			var required_score = queued_module.requires.length;
			var score = 0;
			queued_module.requires.forEach(function(queued_module_requirement){
				if (required_modules[queued_module_requirement] == true) {
					score++;
					if (required_score == score) {					
						load_module(queued_module, queued_module.original_idx);
						require_queue.splice(queued_module_idx,1); 	
					}
				}
			});
		});
	}

	var load_module = function(module, module_idx) {
		var loaded_module = function() {
			console.log('\t ' + (module_idx + 1) + '/' + modules.length + ' : \t [' + module.name + '] finished loading');
			modules_loaded++;
			if (require_queue.length > 0) {
				requirement_check(module, module_idx);
			}
		};

		var loaded_files = 0;

		console.log( '\t ' + (module_idx + 1) + '/' + modules.length + ' : \t [' + module.name + ']' + (module.requires ?  '\t Requires: ' + module.requires.join(', ') : '' ) );
		module.files.forEach(function(file){	
			console.log( '\t ' + (module_idx + 1) + '/' + modules.length +  ' : \t - Loading ' + file.path );

			if (file.callback) modules_callbacks.push(file);
			// Add a default callback that wraps the normal callback
			var default_callback = function() {			
				loaded_files++;				
				if (loaded_files == module.files.length) {
					loaded_module();	
				}
				if (modules_loaded == modules.length) {
					console.log('[ ' + modules.length + ' modules loaded, processing callbacks ]');
					// Sort the callbacks so that they fire in order
					modules_callbacks.sort( function( a, b ) { return a - b });
					
					// Fire all the enqueued callbacks
					modules_callbacks.forEach(function(file){
						console.log( '\t Executing ' + file.callback );
						_execute(file.callback, file.variables ? file.variables : {}, window );	
					});
				
				}
			}

			_load(module.name, file.path, default_callback, modules_class);
		});
	}

	modules.forEach(function(module, module_idx) {
		if (module.requires){
			module.requires.forEach(function(dependency){
				if ( typeof required_modules[dependency] === 'undefined' ) {
					required_modules[dependency] = false;
				}
			});
			module.original_idx = module_idx;
			require_queue.push(module);
		}
		else {
			load_module(module, module_idx );
		}

	}); 

}

// Loads a module and then fires the relevant callback.
function _load(name, path, callback, modules_class) {
	document.write.to = {filename: path};
	var head = document.getElementsByTagName('head')[0];

	// Disable cache for Dev and Staging
	path += (s.env == 'Dev' || s.env == 'Staging') ? '?_=' + Date.now() : '';
	
	if (path.match(/\.js/)) {
		var script = document.createElement('script');
		script.type = 'module';
		script.className += modules_class;
		script.src = path;
		if (callback) {
			script.onload = callback;
		}
		head.appendChild(script);
	}
	if (path.match(/\.css/)) {
		var stylesheet = document.createElement('link');
		stylesheet.rel = 'stylesheet';
		stylesheet.href = path;
		if (callback) {
			stylesheet.onload = callback;
		}
		head.appendChild(stylesheet); 	
	}
}
</script><script>/**
 * Poke Matrix
 * 
 * Pocket sized loading effect.
 * 
 */

const charArr = ['モ', 'エ', 'ヤ', 'キ', 'オ', 'カ', '7', 'ケ', 'サ', 'ス', 'z', '1', '5', '2', 'ヨ', 'タ', 'ワ', '4', 'ネ', 'ヌ', 'ナ', '9', '8', 'ヒ', '0', 'ホ', 'ア', '3', 'ウ', ' ', 'セ', '¦', ':', '"', '꞊', 'ミ', 'ラ', 'リ', '╌', 'ツ', 'テ', 'ニ', 'ハ', 'ソ', '▪', '—', '<', '>', '0', '|', '+', '*', 'コ', 'シ', 'マ', 'ム', 'メ'];

const backgroundImage = new Image();
let isDesktop = window.innerWidth > 640;
backgroundImage.src = isDesktop ? document.getElementById('exit_image').src : document.getElementById('exit_image_mobile').src  ;

const webgl = document.getElementById('webgl');
webgl.style.filter = 'saturate(0)';

const canvas = document.getElementById('pokematrixCanvas');
const ctx = canvas.getContext('2d');
const canvas2 = document.getElementById('pokematrixImage');
canvas2.style.display = 'none';
const ctx2 = canvas2.getContext('2d', {
    willReadFrequently: true
});

let exitButton = document.getElementById('pokematrixSign');

let w = canvas.width = canvas2.width = exitButton.offsetWidth + 10;
let h = canvas.height = canvas2.height = exitButton.offsetHeight + 10;

const largeScreen = canvas.width * canvas.height < 2000000;
const portraitMode = canvas.width < canvas.height;
const fontSize = (portraitMode || largeScreen) ? 2 : 2;

let cols = Math.floor(w / fontSize ) + 1;
let ypos = Array(cols).fill(0);

window.matrix_scene = {
    type: 'button',
    interval: false,
    complete: false,
    currentTime: 0,
    lastTime: 0,
    /**
     * Stages:
     *  - 0 Intro - load virtual office
     *  - 1 Fill viewport with numbers - load virtual office assets
     *  - 2 Buy time to fill the matrix (if it loaded from cache / too fast)
     *  - 3 Enter the matrix - start
     */
    stage: 0,
    /**
     * Timestamp when the current stage began.
     */
    stageStarted: 0,
    /**
     * Stage specific variables.
     */
    // Stage 0
    elapsed: 0,
    // Stage 1
    loaded_done: 0,
    loaded_target: 0,
    // Stage 2
    transition_total: 1250, // in milliseconds

    // Animates the scene
    animate: function (currentTime) {
        const elapsedSinceLast = currentTime - window.matrix_scene.lastTime;
        window.matrix_scene.currentTime = currentTime;
        window.matrix_scene.elapsed += window.matrix_scene.currentTime - window.matrix_scene.lastTime;
        window.matrix_scene.lastTime = currentTime;
        drawBackground();

        ctx.font = fontSize + 'pt monospace';

        if (window.matrix_scene.stage == 0) {
            ctx.fillStyle = "rgba(0,0,0,0.00125)";
            ctx.fillRect(0, 0, w, h);
            // @todo: implement the intro sequence here - column reduce?

            ypos.forEach((y, ind) => {

                window.matrix_scene.drawSymbol(y, ind);



                if ((y > 1 + randomInt(1, window.matrix_scene.elapsed))) ypos[ind] = 0;
                else ypos[ind] = y + fontSize;

            });
        }
        if (window.matrix_scene.stage == 1) {
            ctx.fillStyle = "rgba(0,0,0,0.0025)";
            ctx.fillRect(0, 0, w, h);
            ypos.forEach((y, ind) => {
                window.matrix_scene.drawSymbol(y, ind);

                if (y > 1 + randomInt(1, 2000 * window.matrix_scene.loaded_done)) ypos[ind] = 0;
                else ypos[ind] = y + fontSize;

            });

        }
        if (window.matrix_scene.stage == 2) {
            ctx.fillStyle = "rgba(0,0,0,0.005)";
            ctx.fillRect(0, 0, w, h);

            ypos.forEach((y, ind) => {
                window.matrix_scene.drawSymbol(y, ind);

                if ((y > 1 + randomInt(1, window.matrix_scene.elapsed))) ypos[ind] = 0;
                else ypos[ind] = y + fontSize;

            });

        }
        if (window.matrix_scene.stage == 3) {

            ctx.fillStyle = "rgba(0,0,0,0.005)";
            ctx.fillRect(0, 0, w, h);
            ypos.forEach((y, ind) => {
                window.matrix_scene.drawSymbol(y, ind);

                if ((y > 1 + randomInt(1, window.matrix_scene.elapsed))) ypos[ind] = 0;
                else ypos[ind] = y + fontSize;

            });
        }

        if (!window.matrix_scene.complete) {
            requestAnimationFrame(window.matrix_scene.animate);
        }
    },
    drawSymbol: function (y, ind) {
        const text = charArr[randomInt(0, charArr.length - 1)].toUpperCase();
        const x = ind * fontSize * 1.5;

        ctx.fillStyle = getAverageColor(ctx2, x, y);
        ctx.fillText(text, x, y);
    },
    // Updates the scene
    updateStage: function () {
        if (window.matrix_scene.stage == 0) {
            if (window.virtual_office && (Date.now() - window.matrix_scene.stageStarted > 500)) {
                window.matrix_scene.stage = 1;
                window.matrix_scene.stageStarted = Date.now();
                for (var measure in window.virtual_office.loaders.stats) {
                    window.matrix_scene.loaded_target += window.virtual_office.loaders.stats[measure].target;
                }

            }
        }
        if (window.matrix_scene.stage == 1) {
            window.matrix_scene.loaded_done = 0;
            for (var measure in window.virtual_office.loaders.stats) {
                window.matrix_scene.loaded_done += window.virtual_office.loaders.stats[measure].loaded;
            }

            if (
                window.matrix_scene.loaded_done == window.matrix_scene.loaded_target && (Date.now() - window.matrix_scene.stageStarted > 500)
            ) {
                window.matrix_scene.stage = 2;
                window.matrix_scene.stageStarted = Date.now();
            }
        }
        if (window.matrix_scene.stage == 2) {
            if (
                window.virtual_office.ready == true &&
                (Date.now() - window.matrix_scene.stageStarted > 500)
            ) {
                window.matrix_scene.stage = 3;
                window.matrix_scene.stageStarted = Date.now();
                canvas.style.transition = 'filter 2.5s, transform 2.5s, opacity 2.5s';
                canvas.style.transform = "scale(5)";
                canvas.style.filter = "blur(5px)";
                canvas.style.opacity = 0;

                exitButton.style.transition = 'opacity 2s';
                exitButton.style.opacity = 1;
            }
        }
        if (window.matrix_scene.stage == 3) {
            if (
                (Date.now() - window.matrix_scene.stageStarted) > window.matrix_scene.transition_total
            ) {
                clearInterval(window.matrix_scene.interval);
                canvas.style.display = 'none';
                exitButton.addEventListener( 'click', downTheRabbitHole);
            }
        }
    },
    // Start
    start: function () {
        ctx.fillStyle = "rgba(0,0,0,0)";
        ctx.fillRect(0, 0, w, h);

        window.addEventListener('orientationchange', handleViewportChange);
        window.addEventListener('resize', handleViewportChange);

        window.matrix_scene.stageStarted = Date.now();
        window.matrix_scene.interval = setInterval(window.matrix_scene.updateStage, 100);
        requestAnimationFrame(window.matrix_scene.animate);
    }
};

function downTheRabbitHole() {
    window.virtual_office.started = true;
    document.title = 'Open Studios | Perth, Western Australia';
    const pageWrapper = document.getElementById('page-wrapper');
    
    pageWrapper.style.opacity = 1;
    pageWrapper.style.transition = 'opacity 1s';
    pageWrapper.style.opacity = 0;

    // Hide the pageWrapper on completion so the iframed pages don't clash.
    setTimeout( () => {
        window.matrix_scene.complete = true;
        pageWrapper.remove();

        // Animate the camera resetting from any other position.
        window.virtual_office.tweens.resetCameraRotation.start();
        window.virtual_office.tweens.resetCameraPosition.start();
    }, 1000);

    webgl.style.transition = 'filter 3s 2s, opacity 4s';
    webgl.style.filter = "saturate(1)";
    webgl.style.opacity = 1;

    // Hide body element scrollbars as the 3D viewport takes over.
    document.querySelector("body").style.overflow = 'hidden';

}

// Function to draw the background image
function drawBackground() {
    var scale = isDesktop ? 1 : 0.8;

    var scaledWidth =  canvas.width * scale;
    var scaledHeight =  canvas.height * scale;

    // Calculate the top-left coordinates of the image to center it
    var imageX =  (w - scaledWidth) / 2;
    var imageY = 2.5 + (h - scaledHeight) / 2;

    if (!isDesktop) {
        imageX += ( 0.1 ) * canvas.width;
        imageY -= ( 0.1 ) * canvas.height;
    }

    // Draw the image on the canvas at the calculated position
    ctx2.drawImage(backgroundImage, imageX, imageY, scaledWidth, scaledHeight);
}

function getAverageColor(context, x, y) {
    const imageData = context.getImageData(x, y, 5, 5).data;
    let r = 0,
        g = 0,
        b = 0;
    let randomDelta = Math.tan(randomInt(1, 50)) * 2;
    for (let i = 0; i < imageData.length; i += 4) {
        r += imageData[i] + randomDelta;
        g += imageData[i + 1] + randomDelta;
        b += imageData[i + 2] + randomDelta;
    }
    const count = imageData.length / 4;
    if (Math.floor(g / count) <=0 ) {
        return `rgba(0,0,0,0.0001)`;
        
    }
    else {
        return `rgb(${Math.floor(r / count)}, ${Math.floor(g / count)}, ${Math.floor(b / count)})`;
    }
}


function randomInt(min, max) {
    return Math.floor(Math.random() * (max - min) + min);
}

function handleViewportChange() {

    w = canvas.width = canvas2.width = exitButton.offsetWidth;
    h = canvas.height = canvas2.height = exitButton.offsetHeight;
    cols = Math.floor(w / fontSize) + 1;
    ypos = Array(cols).fill(0);

    ctx.fillStyle = '#0000';
    ctx.fillRect(0, 0, w, h);

    isDesktop = window.innerWidth > 640;
    backgroundImage.src = isDesktop ? document.getElementById('exit_image').src : document.getElementById('exit_image_mobile').src  ;
}</script><script>var _paq = window._paq = window._paq || [];
/* tracker methods like "setCustomDimension" should be called before "trackPageView" */
_paq.push(['trackPageView']);
_paq.push(['enableLinkTracking']);
(function() {
var u="https://analytics.openstudios.xyz/";
_paq.push(['setTrackerUrl', u+'matomo.php']);
_paq.push(['setSiteId', '11']);
var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
})();</script></div></body></html>